import { App } from './../../App';
import { MainPageComponent } from './MainPageComponent';
import { ignoreBlanks } from './../../TestUtils';

describe('Main Page Component', () => {

    const pageWithMainPageComponent = {
        getRoute: () => '/ordinary-content',
        render: async () => "Some ordinary content",
        applyDomChanges: () => {},
        getData: async () => new Map<string, object>()
    }

    afterEach(() => {
        document.body.innerHTML = '';
    });

    it('should render the base layout where all the content will be loaded', async () => {
        let app = new App(pageWithMainPageComponent.getRoute(), new MainPageComponent());
        app.addPageController(pageWithMainPageComponent);
        await app.init();

        expect(ignoreBlanks(document.body.innerHTML)).toContain(ignoreBlanks(`<divclass=\"wrapper\"><!--Navbar--><navclass=\"main-headernavbarnavbar-expandnavbar-whitenavbar-light\"><!--Leftnavbarlinks--><ulclass=\"navbar-nav\"><liclass=\"nav-item\"><aclass=\"nav-link\"data-widget=\"pushmenu\"href=\"#\"role=\"button\"><iclass=\"fasfa-bars\"></i></a></li><liclass=\"nav-itemd-noned-sm-inline-block\"><ahref=\"/\"class=\"nav-link\">Home</a></li><liclass=\"nav-itemd-noned-sm-inline-block\"><ahref=\"/users\"class=\"nav-link\">Users</a></li></ul><!--Rightnavbarlinks--><ulclass=\"navbar-navml-auto\"><!--NavbarSearch--><liclass=\"nav-item\"><aclass=\"nav-link\"data-widget=\"navbar-search\"href=\"#\"role=\"button\"><iclass=\"fasfa-search\"></i></a><divclass=\"navbar-search-block\"><formclass=\"form-inline\"><divclass=\"input-groupinput-group-sm\"><inputclass=\"form-controlform-control-navbar\"type=\"search\"placeholder=\"Search\"aria-label=\"Search\"><divclass=\"input-group-append\"><buttonclass=\"btnbtn-navbar\"type=\"submit\"><iclass=\"fasfa-search\"></i></button><buttonclass=\"btnbtn-navbar\"type=\"button\"data-widget=\"navbar-search\"><iclass=\"fasfa-times\"></i></button></div></div></form></div></li><!--MessagesDropdownMenu--><liclass=\"nav-itemdropdown\"><aclass=\"nav-link\"data-toggle=\"dropdown\"href=\"#\"><iclass=\"farfa-comments\"></i><spanclass=\"badgebadge-dangernavbar-badge\">3</span></a><divclass=\"dropdown-menudropdown-menu-lgdropdown-menu-right\"><ahref=\"#\"class=\"dropdown-item\"><!--MessageStart--><divclass=\"media\"><imgsrc=\"/img/user1-128x128.jpg\"alt=\"UserAvatar\"class=\"img-size-50mr-3img-circle\"><divclass=\"media-body\"><h3class=\"dropdown-item-title\">BradDiesel<spanclass=\"float-righttext-smtext-danger\"><iclass=\"fasfa-star\"></i></span></h3><pclass=\"text-sm\">Callmewheneveryoucan...</p><pclass=\"text-smtext-muted\"><iclass=\"farfa-clockmr-1\"></i>4HoursAgo</p></div></div><!--MessageEnd--></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-item\"><!--MessageStart--><divclass=\"media\"><imgsrc=\"/img/user8-128x128.jpg\"alt=\"UserAvatar\"class=\"img-size-50img-circlemr-3\"><divclass=\"media-body\"><h3class=\"dropdown-item-title\">JohnPierce<spanclass=\"float-righttext-smtext-muted\"><iclass=\"fasfa-star\"></i></span></h3><pclass=\"text-sm\">Igotyourmessagebro</p><pclass=\"text-smtext-muted\"><iclass=\"farfa-clockmr-1\"></i>4HoursAgo</p></div></div><!--MessageEnd--></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-item\"><!--MessageStart--><divclass=\"media\"><imgsrc=\"/img/user3-128x128.jpg\"alt=\"UserAvatar\"class=\"img-size-50img-circlemr-3\"><divclass=\"media-body\"><h3class=\"dropdown-item-title\">NoraSilvester<spanclass=\"float-righttext-smtext-warning\"><iclass=\"fasfa-star\"></i></span></h3><pclass=\"text-sm\">Thesubjectgoeshere</p><pclass=\"text-smtext-muted\"><iclass=\"farfa-clockmr-1\"></i>4HoursAgo</p></div></div><!--MessageEnd--></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-itemdropdown-footer\">SeeAllMessages</a></div></li><!--NotificationsDropdownMenu--><liclass=\"nav-itemdropdown\"><aclass=\"nav-link\"data-toggle=\"dropdown\"href=\"#\"><iclass=\"farfa-bell\"></i><spanclass=\"badgebadge-warningnavbar-badge\">15</span></a><divclass=\"dropdown-menudropdown-menu-lgdropdown-menu-right\"><spanclass=\"dropdown-itemdropdown-header\">15Notifications</span><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-item\"><iclass=\"fasfa-envelopemr-2\"></i>4newmessages<spanclass=\"float-righttext-mutedtext-sm\">3mins</span></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-item\"><iclass=\"fasfa-usersmr-2\"></i>8friendrequests<spanclass=\"float-righttext-mutedtext-sm\">12hours</span></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-item\"><iclass=\"fasfa-filemr-2\"></i>3newreports<spanclass=\"float-righttext-mutedtext-sm\">2days</span></a><divclass=\"dropdown-divider\"></div><ahref=\"#\"class=\"dropdown-itemdropdown-footer\">SeeAllNotifications</a></div></li><liclass=\"nav-item\"><aclass=\"nav-link\"data-widget=\"fullscreen\"href=\"#\"role=\"button\"><iclass=\"fasfa-expand-arrows-alt\"></i></a></li><liclass=\"nav-item\"><aclass=\"nav-link\"data-widget=\"control-sidebar\"data-controlsidebar-slide=\"true\"href=\"#\"role=\"button\"><iclass=\"fasfa-th-large\"></i></a></li></ul></nav><!--/.navbar--><!--MainSidebarContainer--><asideclass=\"main-sidebarsidebar-dark-primaryelevation-4\"><!--BrandLogo--><ahref=\"/index3.html\"class=\"brand-link\"><imgsrc=\"/img/AdminLTELogo.png\"alt=\"AdminLTELogo\"class=\"brand-imageimg-circleelevation-3\"style=\"opacity:.8\"><spanclass=\"brand-textfont-weight-light\">AdminLTE3</span></a><!--Sidebar--><divclass=\"sidebar\"><!--Sidebaruserpanel(optional)--><divclass=\"user-panelmt-3pb-3mb-3d-flex\"><divclass=\"image\"><imgsrc=\"/img/user2-160x160.jpg\"class=\"img-circleelevation-2\"alt=\"UserImage\"></div><divclass=\"info\"><ahref=\"#\"class=\"d-block\">RodrigoMedeiros</a></div></div><!--SidebarSearchForm--><divclass=\"form-inline\"><divclass=\"input-group\"data-widget=\"sidebar-search\"><inputclass=\"form-controlform-control-sidebar\"type=\"search\"placeholder=\"Search\"aria-label=\"Search\"><divclass=\"input-group-append\"><buttonclass=\"btnbtn-sidebar\"><iclass=\"fasfa-searchfa-fw\"></i></button></div></div></div><!--SidebarMenu--><navclass=\"mt-2\"><ulid=\"app-menu\"class=\"navnav-pillsnav-sidebarflex-column\"data-widget=\"treeview\"role=\"menu\"data-accordion=\"false\"><!--Addiconstothelinksusingthe.nav-iconclasswithfont-awesomeoranyothericonfontlibrary--><liclass=\"nav-itemmenu-is-openingmenu-open\"><ahref=\"#\"class=\"nav-link\"><iclass=\"nav-iconfarfa-plus-square\"></i><p>Calendar<iclass=\"fasfa-angle-leftright\"></i></p></a><ulclass=\"navnav-treeview\"><liclass=\"nav-item\"><ahref=\"/\"class=\"nav-link\"><iclass=\"farfa-circlenav-icon\"></i><p>Home</p></a></li><liclass=\"nav-item\"><ahref=\"/users\"class=\"nav-link\"><iclass=\"farfa-circlenav-icon\"></i><p>Users</p></a></li></ul></li></ul></nav><!--/.sidebar-menu--></div><!--/.sidebar--></aside><!--ControlSidebar--><asideclass=\"control-sidebarcontrol-sidebar-dark\"><!--Controlsidebarcontentgoeshere--></aside><!--/.control-sidebar--><!--ContentWrapper.Containspagecontent--><divclass=\"content-wrapper\"id=\"contentRoot\"style=\"min-height:0px;\">Someordinarycontent</div><!--/.content-wrapper--><footerclass=\"main-footer\"><strong>CopyrightÂ©2014-2021<ahref=\"https://adminlte.io\">AdminLTE.io</a>.</strong>Allrightsreserved.<divclass=\"float-rightd-noned-sm-inline-block\"><b>Version</b>3.2.0</div></footer></div>`));
    });

});